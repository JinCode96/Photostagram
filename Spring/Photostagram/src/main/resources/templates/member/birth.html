<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org"
       xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
       layout:decorate="layout/memberLayout">
<th:block layout:fragment="main">
<script>
    $(function(){
        $('#signin-btn').click(function(e){
            e.preventDefault();

            alert('birth!!!');

            let year = $('select[name=year]').val();
            let month = $('select[name=month]').val();
            let day = $('select[name=day]').val();

            let userData = sessionStorage.getItem("user");
            let user = JSON.parse(userData);

            // 1의 자리 수이면 앞에 0 붙이기
            if(month < 10 && day < 10) {
                month = '0' + month;
                day = '0' + day;
            }

            user.birth = year + '-' + month + '-' + day;

            sessionStorage.setItem("user", JSON.stringify(user));
            location.href = '/Photostagram/member/email';
        });
    });
</script>
<main class="member">
    <div class="container">
        <div class="main-container">
            <div class="main-content">
                <div class="form-container">
                    <div class="form-content box">
                        <div class="birth-logo">
                            <img th:src="@{/img/birthday-cake.png}" alt="Instagram logo" class="logo-light">
                        </div>
                        <div class="signin-form-reg" id="signin-form">
                            <div class="birth">
                                <p>생일 추가</p>
                                <div>
                                    공개프로필에 포함되지 않습니다. <br>
                                    <a href="#">왜 생일 정보를 입력해야하나요?</a>
                                </div>
                            </div>
                            <form th:action="@{/member/birth}" method="post">

                                <div class="info" id="info__birth">
                                    <select class="box" name="year" id="select_year" onchange="javascript:lastday();"></select>
                                    <select class="box" name="month" id="select_month" onchange="javascript:lastday();"></select>
                                    <select class="box" name="day" id="select_day"></select>
                                </div>
                                <div class="birth2">
                                    <div>
                                        태어난 날짜를 입력해야합니다
                                    </div>
                                    <div>
                                        비즈니스나 반려동물 등을 위한 계정인 경우에도 회원님의 생일 정보를 사용하세요
                                    </div>
                                </div>
                                <div class="btn-group">
                                    <button type="submit" class="btn-login" id="signin-btn">
                                        다음
                                    </button>
                                </div>
                            </form>     
                            <div class="birth">
                                <div>
                                    <a th:href="@{/member/register}">돌아가기</a>
                                </div>
                            </div>                     
                        </div>
                    </div>
                    <div class="box goto">
                        <p>
                            계정이 있으신가요?
                            <a th:href="@{/member/login}">로그인</a>
                        </p>
                    </div>

                    <div class="app-download">
                        <p>앱을 다운로드 하세요.</p>
                        <div class="store-link">
                            <a href="#">
                                <img th:src="@{/img/appDownload.png}" alt="app store">
                            </a>
                            <a href="#">
                                <img th:src="@{/img/googlePlay.png}" alt="google play">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</th:block>
</html>