<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/profileLayout}">
    <th:block layout:fragment="main">
        <div id="pro">
          <section>
              <div class="myProfile">
                  <div class="proPhoto">
                      <div>
                      <th:block th:if="${#strings.equals(myName, username)}">
                        <input type="file" class="real-addProf" accept="image/*" style="display: none;"/>
                          <th:block th:if="${not #strings.isEmpty(member.profileImg)}">
                              <img th:src="|@{/}thumb/${member.profileImg}" alt="profile" class="addProf" id="profilePhoto"/>
                          </th:block>
                          <th:block th:unless="${not #strings.isEmpty(member.profileImg)}">
                              <img th:src="@{/img/44884218_345707102882519_2446069589734326272_n.jpg}" alt="profile" class="addProf" id="profilePhoto"/>
                          </th:block>
                      </th:block>
                      <th:block th:unless="${#strings.equals(myName, username)}"></th:block>
                          <th:block th:if="${not #strings.isEmpty(member.profileImg)}">
                              <img th:src="|@{/}thumb/${member.profileImg}" alt="profile" id="profilePhoto"/>
                          </th:block>
                          <th:block th:unless="${not #strings.isEmpty(member.profileImg)}">
                              <img th:src="@{/img/44884218_345707102882519_2446069589734326272_n.jpg}" alt="profile" id="profilePhoto"/>
                          </th:block>
                      </div>
                  </div>
                  <div class="detail">
                      <div class="pTop">
                          <div class="userName">[[${username}]]</div>
                          <th:block th:if="${#strings.equals(myName, username)}">
                              <a th:href="@{/profile/modify}" class="button">프로필 편집</a>
                          </th:block>
                          <th:block th:unless="${#strings.equals(myName, username)}">
                              <th:block th:if="${result} > 0">
                                  <a href="#" class="button" id="following">팔로잉</a>
                              </th:block>
                              <th:block th:unless="${result} > 0">
                                  <a th:href="@{/profile/follow (type=insert, userName=${username}, myName=${myName})}" class="button" id="follow">팔로우</a>
                              </th:block>
                          </th:block>

                      </div>
                      <ul class="pMiddle">
                          <li>
                              게시물<span>[[${post}]]</span>
                          </li>
                          <li>
                              <a href="#" id="followerModal">팔로워<span>[[${myFollower}]]</span></a>
                          </li>
                          <li>
                              <a href="#" id="followingModal">팔로잉<span>[[${myFollowing}]]</span></a>
                          </li>
                      </ul>
                      <p class="pAbout">
                          <span class="notice">
                              [[${member.profileText}]]
                          </span>
                      </p>
                  </div>
              </div>
              <div class="myNav">
                  <div><a href="#">게시물</a></div>
                  <div><a href="#">릴스</a></div>
                  <div><a href="#">태그됨</a></div>
              </div>
              <th:block th:if="${#maps.isEmpty(sortMap)}">
                  <div class="myList">
                    <h1>게시물이 없습니다.</h1>
                  </div>
              </th:block>
              <th:block th:unless="${#maps.isEmpty(sortMap)}">
                  <div class="myList" th:each="m:${sortMap}">
                      <div class="pic">
                          <a th:href="@{/board/post (no=${m.key})}">
                              <img th:src="|@{/}thumb/${m.value}">
                          </a>
                      </div>
                  </div>
              </th:block>
          </section>
            <div id="fCancel" class="fModal">
                <div class="fContents">
                    <span class="fClose">&times;</span>
                    <div id="fTop">
                        <img th:src="@{/img/44884218_345707102882519_2446069589734326272_n.jpg}" alt="profile">
                        <span>[[${username}]]</span>
                    </div>
                    <ul id="fBottom">
                        <li><a href="#" class="fClose"><span>친한 친구 리스트에 추가</span><i class="fa-solid fa-star"></i></a></li>
                        <li><a href="#" class="fClose"><span>즐겨찾기에 추가</span><i class="fa-regular fa-star"></i></a></li>
                        <li><a href="#" class="fClose"><span>일시 차단</span><i class="fa-solid fa-chevron-right"></i></a></li>
                        <li><a href="#" class="fClose"><span>제한</span><i class="fa-solid fa-chevron-right"></i></a></li>
                        <li><a th:href="@{/profile/follow (type=delete, userName=${username}, myName=${myName})}" id="unFollow" class="fClose">팔로우 취소</a></li>
                    </ul>
                </div>
            </div>
            <div id="followerModalWindow" class="fModal">
                <div class="peopleFollow">
                    <div>
                        팔로워
                        <span class="closeFollow">&times;</span>
                    </div>
                    <ul class="fList">
                        <th:block th:each="follower:${myFollowers}">
                            <li>
                                <a th:href="@{/profile (username=${follower.username})}">
                                    <div>
                                        <th:block th:if="${not #strings.isEmpty(follower.profileImg)}">
                                            <img th:src="|@{/}thumb/${follower.profileImg}" alt="profile">
                                        </th:block>
                                        <th:block th:unless="${not #strings.isEmpty(follower.profileImg)}">
                                            <img th:src="@{/img/44884218_345707102882519_2446069589734326272_n.jpg}" alt="profile">
                                        </th:block>
                                    </div>
                                    <h1>[[${follower.username}]]</h1>
                                </a>
                            </li>
                        </th:block>
                    </ul>
                </div>
            </div>
            <div id="followingModalWindow" class="fModal">
                <div class="peopleFollow">
                    <div>
                        팔로잉
                        <span class="closeFollowing">&times;</span>
                    </div>
                    <ul class="fList">
                        <th:block th:each="map:${followingMap}">
                            <th:block th:each="following:${map.key}">
                                <li>
                                    <a th:href="@{/profile (username=${following.username})}">
                                        <div>
                                            <th:block th:if="${not #strings.isEmpty(following.profileImg)}">
                                                <img th:src="|@{/}thumb/${following.profileImg}" alt="profile">
                                            </th:block>
                                            <th:block th:unless="${not #strings.isEmpty(following.profileImg)}">
                                                <img th:src="@{/img/44884218_345707102882519_2446069589734326272_n.jpg}" alt="profile">
                                            </th:block>
                                        </div>
                                        <h1>[[${following.username}]]</h1>
                                    </a>
                                    <th:block th:if="${map.value == 0}">
                                        <a href="#" class="aFloatRight">
                                            팔로워
                                        </a>
                                    </th:block>
                                    <th:block th:unless="${map.value == 0}">
                                        <a href="#" class="aFloatRight">
                                            팔로잉
                                        </a>
                                    </th:block>
                                </li>
                            </th:block>
                        </th:block>
                    </ul>
                </div>
            </div>
        </div>
    </th:block>
</html>
